---
---
<section id="memories" class="relative py-40 pt-[100vh] overflow-hidden bg-favorite-50/30">
  
  <!-- Elementos decorativos de fondo -->
  <div class="absolute top-0 left-0 w-full h-full pointer-events-none">
    <div class="absolute top-[10%] right-[-5%] w-[40vw] h-[40vw] bg-favorite-100 rounded-full blur-[100px] opacity-40"></div>
    <div class="absolute bottom-[10%] left-[-5%] w-[30vw] h-[30vw] bg-brand-100 rounded-full blur-[80px] opacity-30"></div>
  </div>

  <div class="max-w-7xl mx-auto px-6">
    
    <!-- Intro Text -->
    <div class="mb-40 max-w-3xl">
      <div class="opacity-0 reveal-mem">
        <span class="text-favorite-600 font-mono text-xs tracking-widest uppercase mb-4 block">Segunda Etapa</span>
        <h2 class="text-4xl md:text-6xl font-bold text-slate-900 leading-tight mb-8">
          A lo largo de estos meses...
        </h2>
      </div>
      <p class="text-xl text-slate-600 font-light leading-relaxed opacity-0 reveal-mem">
        Pasamos demasiadas experiencias juntos. Te vi crecer, aprender, reír, llorar, dormir, hacer tantas cosas que me hace pensar en lo mucho que te admiro.
      </p>
    </div>

    <!-- Photo Collage -->
    <div class="grid grid-cols-1 md:grid-cols-12 gap-8 lg:gap-16 items-center">
      
      <!-- Left: Column of small images -->
      <div class="md:col-span-4 space-y-12">
        <div class="overflow-hidden rounded-2xl shadow-lg aspect-[4/5] opacity-0 reveal-mem translate-x-[-20px] parallax-mem" data-speed="0.1">
          <img src="https://images.unsplash.com/photo-1516575334481-f85287c2c82d?q=80&w=800" class="w-full h-full object-cover scale-110" alt="Recuerdo 1" />
        </div>
        <div class="p-8 bg-white/80 backdrop-blur-sm rounded-3xl shadow-sm opacity-0 reveal-mem">
          <p class="text-lg text-slate-700 italic">"Disfruto de acompañarte, de verte, besarte, abrazarte..."</p>
        </div>
        <div class="overflow-hidden rounded-2xl shadow-lg aspect-square opacity-0 reveal-mem translate-x-[-20px] parallax-mem" data-speed="0.2">
          <img src="https://images.unsplash.com/photo-1529139574466-a302c275641b?q=80&w=800" class="w-full h-full object-cover scale-110" alt="Recuerdo 2" />
        </div>
      </div>

      <!-- Center: Main Image -->
      <div class="md:col-span-4 self-start md:mt-20">
        <div class="overflow-hidden rounded-full shadow-2xl aspect-[3/4] border-8 border-white opacity-0 reveal-mem scale-90 parallax-mem" data-speed="0.05">
          <img src="https://images.unsplash.com/photo-1523438885200-e635ba2c371e?q=80&w=1000" class="w-full h-full object-cover" alt="Nosotros" />
        </div>
        <div class="mt-12 text-center opacity-0 reveal-mem">
           <p class="text-favorite-700 font-serif italic text-2xl">"...olerte, estar junto a ti."</p>
        </div>
      </div>

      <!-- Right: More memories -->
      <div class="md:col-span-4 space-y-12 md:mt-40">
        <div class="overflow-hidden rounded-2xl shadow-lg aspect-[3/4] opacity-0 reveal-mem translate-x-[20px] parallax-mem" data-speed="0.15">
          <img src="https://images.unsplash.com/photo-1606909477617-67253502802d?q=80&w=800" class="w-full h-full object-cover scale-110" alt="Tus tejidos" />
        </div>
        <p class="text-slate-500 font-light leading-relaxed opacity-0 reveal-mem">
          Seguir apreciando y admirando tus tejidos, tu risa, tu mirada, tu estilo, tu voz, tu todo.
        </p>
        <div class="overflow-hidden rounded-2xl shadow-lg aspect-[4/5] opacity-0 reveal-mem translate-x-[20px] parallax-mem" data-speed="0.1">
          <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=800" class="w-full h-full object-cover scale-110" alt="Tu risa" />
        </div>
      </div>

    </div>

    <!-- Bottom Message -->
    <div class="mt-40 max-w-4xl mx-auto text-center border-t border-favorite-200 pt-20">
      <p class="text-2xl md:text-3xl font-light text-slate-700 leading-relaxed opacity-0 reveal-mem">
        Y es algo que no se me olvida nunca, incluso en los valles más bajos en los que hemos estado, siempre te tengo presente.
      </p>
      <div class="mt-12 inline-block px-8 py-4 bg-favorite-600 text-white rounded-full shadow-lg opacity-0 reveal-mem translate-y-4">
        <p class="font-serif italic text-xl">"Construir algo contigo."</p>
      </div>
    </div>

  </div>
</section>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener('astro:page-load', () => {
    
    // 1. Reveal animations for all elements
    const reveals = document.querySelectorAll('#memories .reveal-mem');
    reveals.forEach(el => {
      gsap.to(el, {
        opacity: 1,
        y: 0,
        x: 0,
        scale: 1,
        duration: 1.2,
        ease: "power3.out",
        scrollTrigger: {
          trigger: el,
          start: "top 90%",
          toggleActions: "play none none reverse"
        }
      });
    });

    // 2. Parallax effect for photos
    const parallaxes = document.querySelectorAll('#memories .parallax-mem');
    parallaxes.forEach(el => {
      const speed = el.getAttribute('data-speed') || 0.1;
      gsap.to(el, {
        yPercent: -100 * Number(speed),
        ease: "none",
        scrollTrigger: {
          trigger: el,
          start: "top bottom",
          end: "bottom top",
          scrub: true
        }
      });
    });

  });
</script>