---
import { getCollection, render } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.id },
		props: post,
	}));
}

const post = Astro.props;
const { Content } = await render(post);
---

<Layout title={`${post.data.title} â€” eddn.dev`} description={post.data.description}>
	<article class="max-w-3xl mx-auto px-6 py-24">
		<header class="mb-12">
			<time 
				transition:name={`date-${post.id}`}
				class="text-sm font-mono text-slate-400 mb-4 block"
			>
				{post.data.pubDate.toLocaleDateString('es-ES', {
					year: 'numeric',
					month: 'long',
					day: 'numeric',
				})}
			</time>
			<h1 
				transition:name={`title-${post.id}`}
				class="text-4xl sm:text-5xl font-black tracking-tighter text-slate-900 leading-tight"
			>
				{post.data.title}
			</h1>
			{post.data.tags && (
				<div class="flex gap-2 mt-6">
					{post.data.tags.map(tag => (
						<span class="text-xs font-mono px-2 py-1 bg-brand-50 text-brand-600 rounded">
							#{tag}
						</span>
					))}
				</div>
			)}
		</header>

		<div class="prose prose-slate prose-lg max-w-none 
			prose-headings:text-slate-900 prose-headings:font-black prose-headings:tracking-tighter
			prose-a:text-brand-500 prose-strong:text-slate-900
			prose-code:text-brand-600 prose-code:bg-brand-50 prose-code:px-1 prose-code:rounded prose-code:before:content-none prose-code:after:content-none">
			<Content />
		</div>
	</article>
</Layout>

<style is:global>
	@reference "tailwindcss";

	/* Custom styles for the markdown content if needed */
	.prose pre {
		@apply rounded-xl border border-slate-200 bg-slate-50! p-6;
	}
	.prose code {
		@apply font-mono text-sm;
	}
</style>
