---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const solutions = (await getCollection('leetcode')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const difficultyColor = {
	Easy: 'text-emerald-500 bg-emerald-50',
	Medium: 'text-amber-500 bg-amber-50',
	Hard: 'text-rose-500 bg-rose-50',
};
---

<Layout title="LeetCode — eddn.dev">
	<main class="max-w-7xl mx-auto px-6 py-24">
		<header class="mb-16">
			<h1 class="text-5xl font-black tracking-tighter text-slate-900 mb-4">
				SOLUTIONS<span class="text-brand-500">.</span>
			</h1>
			<p class="text-xl text-slate-600 font-light">
				Análisis y resoluciones de problemas algorítmicos.
			</p>
		</header>

		<div class="overflow-x-auto">
			<table class="w-full text-left border-collapse">
				<thead>
					<tr class="border-b border-slate-200">
						<th class="py-4 font-mono text-xs uppercase tracking-widest text-slate-400">Problema</th>
						<th class="py-4 font-mono text-xs uppercase tracking-widest text-slate-400">Dificultad</th>
						<th class="py-4 font-mono text-xs uppercase tracking-widest text-slate-400">Complejidad</th>
						<th class="py-4 font-mono text-xs uppercase tracking-widest text-slate-400">Fecha</th>
					</tr>
				</thead>
				<tbody>
					{solutions.map((solution) => (
						<tr class="border-b border-slate-100 group hover:bg-brand-50/30 transition-colors">
							<td class="py-6">
								<a href={`/leetcode/${solution.id}`} class="font-bold text-slate-900 group-hover:text-brand-500 transition-colors">
									<span transition:name={`title-${solution.id}`}>{solution.data.title}</span>
								</a>
							</td>
							<td class="py-6">
								<span 
									transition:name={`difficulty-${solution.id}`}
									class={`text-xs font-bold px-2.5 py-1 rounded-full ${difficultyColor[solution.data.difficulty]}`}
								>
									{solution.data.difficulty}
								</span>
							</td>
							<td class="py-6 text-sm font-mono text-slate-500">
								{solution.data.complexity ? (
									<span>T: {solution.data.complexity.time} / S: {solution.data.complexity.space}</span>
								) : (
									<span class="text-slate-300">N/A</span>
								)}
							</td>
							<td class="py-6 text-sm font-mono text-slate-400">
								{solution.data.pubDate.toLocaleDateString('es-ES', {
									year: 'numeric',
									month: 'short',
								})}
							</td>
						</tr>
					))}
				</tbody>
			</table>
		</div>
	</main>
</Layout>
